<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{Layout}">
<body>
<section layout:fragment="content">
    <div class="row">
        <div class="col-xs-12">
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Responsive Hover Table</h3>

                    <div class="box-tools">
                        <div class="input-group input-group-sm hidden-xs" style="width: 150px;">
                            <input type="text" name="table_search" class="form-control pull-right" placeholder="Search">

                            <div class="input-group-btn">
                                <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /.box-header -->
                <div class="box-body table-responsive no-padding">
                    <table class="table table-hover">
                        <tr>
                            <th>ID</th>
                            <th>昵称</th>
                            <th>手机</th>
                            <th>头像</th>
                            <th>激活</th>
                            <th>封禁</th>
                        </tr>
                        <tr th:each="user : ${users}">
                            <td th:text="${user.id}"></td>
                            <td th:text="${user.nickname}"></td>
                            <td th:text="${user.mobile}"></td>
                            <td><img th:src="@{'https:' + ${user.getAvatar()}}"/></td>
                            <td><span th:text="${user.isActivated == 1 ? '已激活' : '未激活'}"
                                      class="label" th:classappend="${user.isActivated == 1 ? 'label-success' : 'label-warning'}"></span></td>
                            <td><span th:text="${user.isBanned == 1 ? '封禁' : '正常'}"
                                      class="label" th:classappend="${user.isBanned == 1 ? 'label-warning' : 'label-success'}"></span></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <ul class="pagination" th:if="${users.totalPages lt 7}">
        <!-- 上一页 -->
        <li class="page-item" th:classappend="${users.isFirst()} ? 'disabled' : ''">
            <a th:href="@{'/admin/users?page=' + ${(users.number - 1)}}" class="page-link" th:attr="pageIndex=${users.number} - 1" aria-label="Previous">
                <span aria-hidden="true">«</span>
            </a>
        </li>

        <li class="page-item" th:each="i : ${#numbers.sequence(1, users.totalPages)}"
            th:classappend="${(users.number + 1) eq i} ? 'active' : ''" >
            <a class="page-link" th:attr="pageIndex=${i} - 1" href="javascript:void(0);">
                <span th:text="${i}"></span>
            </a>
        </li>

        <li class="page-item" th:classappend="${users.isLast()} ? 'disabled' : ''">
            <a href="javascript:void(0);" class="page-link" th:attr="pageIndex=${users.number} + 1" aria-label="Next">
                <span aria-hidden="true">»</span>
            </a>
        </li>
    </ul>
    <ul class="pagination" th:if="${users.totalPages gt 7}" >
        <li class="page-item" th:classappend="${users.isFirst()} ? 'disabled' : ''">
            <a th:href="@{'/admin/users?page=' + ${users.number - 1}}" class="page-link" th:attr="pageIndex=${users.number} - 1" aria-label="Previous">
                <span aria-hidden="true">«</span>
            </a>
        </li>

        <li class="page-item" th:classappend="${(users.number + 1) eq 1} ? 'active' : ''" >
            <a th:href="@{'/admin/users'}" class="page-link" th:attr="pageIndex=0">1</a>
        </li>

        <li class="page-item" th:if="${(users.number + 1) le 4}" th:each="i : ${#numbers.sequence(2,5)}"
            th:classappend="${(users.number + 1) eq i} ? 'active' : ''" >
            <a class="page-link" th:href="@{'/admin/users?page=' + ${i - 1}}" th:attr="pageIndex=${i} - 1">
                <span th:text="${i}"></span>
            </a>
        </li>

        <li class="page-item disabled" th:if="${(users.number + 1) le 4}">
            <a href="javascript:void(0);" class="page-link">
                <span aria-hidden="true">...</span>
            </a>
        </li>

        <li class="page-item disabled" th:if="${(users.totalPages - (users.number + 1)) le 3}">
            <a href="javascript:void(0);" class="page-link">
                <span aria-hidden="true">...</span>
            </a>
        </li>
        <li class="page-item" th:if="${(users.totalPages - (users.number + 1)) le 3}" th:each="i : ${#numbers.sequence(users.totalPages - 4, users.totalPages - 1)}"
            th:classappend="${(users.number + 1) eq i} ? 'active' : ''" >
            <a class="page-link" th:href="@{'/admin/users?page=' + ${i - 1}}" th:attr="pageIndex=${i} - 1">
                <span th:text="${i}"></span>
            </a>
        </li>

        <li class="page-item disabled" th:if="${((users.number + 1) gt 4) && ((users.totalPages - (users.number + 1)) gt 3 )}">
            <a href="javascript:void(0);" class="page-link">
                <span aria-hidden="true">...</span>
            </a>
        </li>
        <li class="page-item" th:if="${((users.number + 1) gt 4) && ((users.totalPages - (users.number + 1)) gt 3 )}" >
            <a th:href="@{'/admin/users?page=' + ${users.number}}" class="page-link" th:attr="pageIndex=${users.number}">[[${users.number}]]</a>
        </li>
        <li class="page-item active" th:if="${((users.number + 1) gt 4) && ((users.totalPages - (users.number + 1)) gt 3 )}">
            <a th:href="@{'/admin/users?page=' + ${users.number + 1}}" class="page-link" th:attr="pageIndex=${users.number} + 1">[[${users.number + 1}]]</a>
        </li>
        <li class="page-item" th:if="${((users.number + 1) gt 4) && ((users.totalPages - (users.number + 1)) gt 3 )}">
            <a th:href="@{'/admin/users?page=' + ${users.number + 1}}" class="page-link" th:attr="pageIndex=${users.number} + 2">[[${users.number + 2}]]</a>
        </li>

        <li class="page-item disabled"  th:if="${((users.number + 1) gt 4) && ((users.totalPages - (users.number + 1)) gt 3 )}">
            <a href="javascript:void(0);" class="page-link">
                <span aria-hidden="true">...</span>
            </a>
        </li>

        <li class="page-item" th:classappend="${(users.number + 1) eq users.totalPages} ? 'active' : ''" >
            <a th:href="@{'/admin/users?page=' + ${users.totalPages - 1}}" class="page-link" th:attr="pageIndex=${users.totalPages} - 1">[[${users.totalPages}]]</a>
        </li>

        <li class="page-item" th:classappend="${users.isLast()} ? 'disabled' : ''">
            <a th:href="@{'/admin/users?page=' + ${(users.number + 1)}}" class="page-link" th:attr="pageIndex=${users.number} + 1" aria-label="Next">
                <span aria-hidden="true">»</span>
            </a>
        </li>
    </ul>
</section>
</body>
</html>